---
title: 勉強がてら自分のサイトを作ってみた
description: ブログの書き味が満足いくものになった
date: 2023-06-01
thumbnail: https://imagedelivery.net/i4QA6VLSP0gXyj6-3zNFXg/4475e5b5-a345-4029-5f3e-658dcdc40300/public
tags:
  - 技術
  - Next.js
---

こんにちは、すしです。紆余曲折あってWebフロントエンドを学習しないといけなくなってしまい、
学習の一環でこのサイトを作ったりしたので構成とかその他色々書き留めます。

## 構成

1. コア部分
- React(Next.js)
  - v13.4からstableになった App Routerを採用しました
- TypeScript
- SASS(SCSS)
- TypeScript

いわゆるフルスタックフレームワークを使った一般的(?)な構成ですね

2. ブログ部分
- next-mdx-remote
- markuplint
- plaiceholder
- gray-matter
- remayk・rehypeのプラグイン(量が多いので割愛)



## App Routerの採用
Next.jsのApp Routerは、v13.4からstableになったんですがこれがなかなか面白い。
フォルダ名に()をつけると、URLに影響しないままレイアウトを統合できたりするので、
`pages`ではできなかった機能ベースでのコード管理が楽でめちゃくちゃいいと思います。

あとReact Server Componentが素晴らしい。
最近だとAstroとかがクライアントにできる限りJSを送信しない設計思想で作られてたりしますが、
これもそれに似た？ものを感じますね。(強い言葉で書くと強い人に刺されそう)
Server Component内ではasyncやawaitが直接叩けるので、

このあと書くブログまわりでも、記事データのコンパイルとかはゴリゴリに非同期で書けてます。素晴らしい。

## ブログをmdxで構築した
ブログ部分にはmdxを採用しました。mdxは、Markdownの中にjsxやReact Componentが書けるもので、
自分で定義したものを簡単に使えてとても楽です。
加えて`next-mdx-remote`というライブラリが既にReact Server Componentに対応しているので、
導入も極めて楽です。

公式のnext/mdxでも良かったんですが、
front-matterの解析その他の部分で面倒事が発生したので今回は使っていません。

あと、個人的に好きなポイントとしてはmdx内のみでTailwindCSSが使えるようにしたところです。
Tailwindは賛否両論あって日々Twitter上で論争を生んでいますが、
少なくともマークアップに使う分にはここまで楽なものはないと思います。

```mdx
{
<div className="grid grid-cols-1 md:grid-cols-2">{
[
  "https://open.spotify.com/track/7tC1BMOYXstr2ROxU6fShJ?si=8c1a9c6d5f384828",
  "https://open.spotify.com/track/62TlWZUc57JpsQQe7kZ7WP?si=2f7fd3747cd8402e",
].map((url) => <SpotifyCard key={url} url={url} />)}
</div>}
```

これをmdxに直接書くだけで...[^1]
[^1]: そもそもMarkdownのノリで書けるのにいきなりJSXを挟めるのが既に最強すぎるだろ...ではある

{<div className="grid grid-cols-1 md:grid-cols-2">{
[
  "https://open.spotify.com/track/7tC1BMOYXstr2ROxU6fShJ?si=8c1a9c6d5f384828",
  "https://open.spotify.com/track/62TlWZUc57JpsQQe7kZ7WP?si=2f7fd3747cd8402e",

].map((url) => <SpotifyCard key={url} url={url} />)}
</div>}

こんな感じ、すごく楽でいいですね。

あまりにも楽なので、後日mdxを扱う部分をすべて書き直して、
サイト内どこでも使えるように拡張するくらいには便利です。ホントに。


## WIP
